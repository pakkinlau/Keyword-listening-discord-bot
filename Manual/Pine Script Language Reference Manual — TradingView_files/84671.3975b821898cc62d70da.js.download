(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[84671,84029,38357],{860779:()=>{},83436:(e,t,n)=>{"use strict";n.d(t,{Icon:()=>s});var i=n(559496);const s=i.forwardRef((e,t)=>{const{icon:n="",...s}=e;return i.createElement("span",{...s,ref:t,dangerouslySetInnerHTML:{__html:n}})})},223124:(e,t,n)=>{"use strict";n.d(t,{makeCancelable:()=>s,isCancelled:()=>o});class i{}function s(e){let t=!1;return{promise:new Promise((n,s)=>{e.then(e=>t?s(new i):n(e)),e.catch(e=>s(t?new i:e))}),cancel(){t=!0}}}function o(e){return e instanceof i}},581996:(e,t,n)=>{"use strict";n.d(t,{ResizerDetacherState:()=>r});var i=n(588537),s=n(262325),o=n.n(s);class r{constructor(e){this._alive=new(o()),this._container=new(o()),this._width=new(o()),this._height=new(o()),this._fullscreen=new(o()),this._detachable=new(o()),this._fullscreenable=new(o()),this._visible=new(o()),this._availWidth=new(o()),this._availHeight=new(o()),this._owner=new(o()),this._ownersStack=[],this.owner=this._owner.readonly(),this._bridge={alive:this._alive.readonly(),container:this._container.readonly(),width:this._width.readonly(),height:this._height.readonly(),fullscreen:this._fullscreen.readonly(),detachable:this._detachable.readonly(),fullscreenable:this._fullscreenable.readonly(),visible:this._visible.readonly(),availWidth:this._availWidth.readonly(),availHeight:this._availHeight.readonly(),remove:()=>{const e=this._owner.value();e&&e.remove&&e.remove()},negotiateWidth:e=>{const t=this._owner.value();t&&t.negotiateWidth&&t.negotiateWidth(e)},negotiateHeight:e=>{const t=this._owner.value();t&&t.negotiateHeight&&t.negotiateHeight(e)},requestFullscreen:()=>{const e=this._owner.value();e&&e.requestFullscreen&&e.requestFullscreen()},exitFullscreen:()=>{const e=this._owner.value();e&&e.exitFullscreen&&e.exitFullscreen()},detach:e=>{const t=this._owner.value();t&&t.detach&&t.detach(e)},attach:()=>{const e=this._owner.value();e&&e.attach&&e.attach()}},e&&this.pushOwner(e)}bridge(){return this._bridge}pushOwner(e){if(!e.alive.value())return;for(const e of this._ownersStack)this._unsubscribeOwner(e);const t={owner:e};this._ownersStack.push(t),this._subscribeOwner(t)}_subscribeOwner(e){const t=e.owner;if(e.deathWatcher||(this._alive.setValue(!0),e.deathWatcher=t.alive.spawn(),e.deathWatcher.subscribe(t=>{t||this._deadHandler(e)})),this._owner.setValue(t),!e.subscriptions){const n=e.subscriptions=[];this._visible.setValue(!1);const i=(e,t)=>{if(e){const i=e.spawn();n.push(i),i.subscribe(e=>{t.setValue(e)},{callWithLast:!0})}else t.deleteValue()};i(t.container,this._container),i(t.width,this._width),i(t.height,this._height),i(t.fullscreen,this._fullscreen),i(t.detachable,this._detachable),i(t.fullscreenable,this._fullscreenable),i(t.availWidth,this._availWidth),i(t.availHeight,this._availHeight),i(t.visible,this._visible)}}_unsubscribeOwner(e,t){if(e.subscriptions){for(const t of e.subscriptions)t.unsubscribe();e.subscriptions=null}t&&e.deathWatcher&&(e.deathWatcher.unsubscribe(),e.deathWatcher=null)}_deadHandler(e){const t=this._ownersStack.indexOf(e);(0,
i.assert)(-1!==t,"sanitized owner should be in stack");for(let e=this._ownersStack.length-1;e>=t;e--)this._unsubscribeOwner(this._ownersStack[e],!0);this._ownersStack.length=t,t>0?this._subscribeOwner(this._ownersStack[t-1]):(this._alive.setValue(!1),this._owner.deleteValue())}}},90523:(e,t,n)=>{"use strict";n.d(t,{Root:()=>u});n(787236);var i=n(262325),s=n.n(i),o=n(581996);class r{constructor(e){this._document=e,this.isFullscreen=new(s());const t=()=>{const e=["fullscreenElement","webkitFullscreenElement","mozFullscreenElement","mozFullScreenElement","msFullscreenElement"];for(let t=0;t<e.length;t++){const n=e[t];if(n in this._document){this.isFullscreen.setValue(!!this._document[n]);break}}};t();for(const n of["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"])e.addEventListener(n,t,!1)}enter(){const e=this._document.documentElement;for(const t of["requestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen"])if("function"==typeof e[t]){e[t]();break}this.isFullscreen.setValue(!0)}exit(){const e=this._document;for(const t of["exitFullscreen","mozCancelFullScreen","mozExitFullscreen","webkitExitFullscreen","msExitFullscreen"])if("function"==typeof e[t]){e[t]();break}this.isFullscreen.setValue(!1)}}var a=n(554433),c=n(314802),l=n(588537),h=n(638456);class u{constructor(e){this._updateDocumentHeight=e=>{"visual"===this._viewportType&&this._window.document.documentElement.style.setProperty("height",e+"px","important")},this._window=e,this._fullscreenApi=new r(e.document),this._viewportType=h.CheckMobile.iOS()&&!(0,c.isOnMobileAppPage)("any")&&this._window.visualViewport?"visual":"quirks","visual"===this._viewportType?this._viewport=(0,l.ensureDefined)(this._window.visualViewport):this._viewport=this._window;const t=this._layoutSizeSensor=this._window.document.createElement("div");t.id="layout-size-sensor",t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.right="0",t.style.bottom="0",t.style.pointerEvents="none",t.style.visibility="hidden",this._initFullscreen()}allocate(){this.free();const e=this._window.document,t=e.createElement("div");t.classList.add("js-rootresizer__contents"),t.style.position="relative",t.style.width="100%",t.style.height="100%",e.body.insertAdjacentElement("afterbegin",t),e.body.insertAdjacentElement("afterbegin",this._layoutSizeSensor),this._visibilityApi=new a.VisibilityApi(this._window.document);const n={alive:new(s())(!0),fullscreenable:new(s())(!0),container:new(s())(t),width:new(s()),height:new(s()),availWidth:new(s()),availHeight:new(s()),visible:this._visibilityApi.isVisible,fullscreen:this._fullscreenApi.isFullscreen,remove:()=>{n.alive.setValue(!1)},attach:()=>{n.alive.setValue(!1),this._window.close()},requestFullscreen:()=>{this._requestFullscreen()},exitFullscreen:()=>{this._exitFullscreen()}};return n.alive.subscribe(e=>{e||n!==this._area||this.free()}),this._area=n,this._resizeHandler=()=>{const e=this._width(n)||800,t=this._height(n)||600;n.availHeight.setValue(t),n.availWidth.setValue(e),
n.height.setValue(t),n.width.setValue(e)},this._area.height.subscribe(this._updateDocumentHeight,{callWithLast:!0}),this._resizeHandler(),this._viewport.addEventListener("resize",this._resizeHandler),new o.ResizerDetacherState(n).bridge()}free(){if(this._resizeHandler&&(this._viewport.removeEventListener("resize",this._resizeHandler),this._resizeHandler=void 0),this._visibilityApi&&(this._visibilityApi.destroy(),this._visibilityApi=void 0),this._area){const e=this._area;this._area=void 0,e.height.unsubscribe(this._updateDocumentHeight),e.alive.setValue(!1);const t=e.container.value(),n=null==t?void 0:t.parentElement;n&&(n.removeChild(t),n.removeChild(this._layoutSizeSensor))}}_height(e){if("visual"===this._viewportType)return this._layoutSizeSensor.clientHeight;return e.container.value().clientHeight}_width(e){return e.container.value().clientWidth}_requestFullscreen(){this._fullscreenApi.enter()}_exitFullscreen(){this._fullscreenApi.exit()}_initFullscreen(){this._fullscreenApi.isFullscreen.subscribe(e=>{this._resizeHandler&&this._resizeHandler()})}}},554433:(e,t,n)=>{"use strict";n.d(t,{VisibilityApi:()=>o});var i=n(262325),s=n.n(i);class o{constructor(e){let t;this.isVisible=new(s())(!0);let n=null;for(const i of["","moz","ms","webkit"]){const s=i?i+"Hidden":"hidden";if(s in e){t=i+"visibilitychange",n=()=>{this.isVisible.setValue(!e[s])},n(),e.addEventListener(t,n,!1);break}}this.destroy=()=>{n&&(e.removeEventListener(t,n,!1),n=null)}}}},174519:(e,t,n)=>{"use strict";n.d(t,{reconnectChartApi:()=>i,setBroker:()=>s});n(247872);function i(e){const t=window.ChartApiInstance;window.is_authenticated&&(t.disconnect(),e&&t.authTokenManager().reset(),setTimeout(()=>t.connect(),500))}function s(e){window.ChartApiInstance.setBroker(e)}},381269:(e,t,n)=>{"use strict";n.d(t,{customFormatters:()=>i});const i={dateFormatter:null,timeFormatter:null,tickMarkFormatter:null}},830318:(e,t,n)=>{"use strict";n.d(t,{monthFormatFunction:()=>_,dateFormatFunctions:()=>p,availableDateFormats:()=>g,defaultDateFormat:()=>m});var i=n(787236),s=n(689765);const o={1:()=>(0,i.t)("Jan"),2:()=>(0,i.t)("Feb"),3:()=>(0,i.t)("Mar"),4:()=>(0,i.t)("Apr"),5:()=>(0,i.t)("May",{context:"short"}),6:()=>(0,i.t)("Jun"),7:()=>(0,i.t)("Jul"),8:()=>(0,i.t)("Aug"),9:()=>(0,i.t)("Sep"),10:()=>(0,i.t)("Oct"),11:()=>(0,i.t)("Nov"),12:()=>(0,i.t)("Dec")},r=(e,t)=>(t?e.getMonth():e.getUTCMonth())+1,a=(e,t)=>t?e.getFullYear():e.getUTCFullYear(),c=(e,t)=>(0,s.numberToStringWithLeadingZero)(((e,t)=>t?e.getDate():e.getUTCDate())(e,t),2),l=(e,t)=>o[r(e,t)](),h=(e,t)=>(0,s.numberToStringWithLeadingZero)(r(e,t),2),u=(e,t)=>(0,s.numberToStringWithLeadingZero)(a(e,t)%100,2),d=(e,t)=>(0,s.numberToStringWithLeadingZero)(a(e,t),4),_=(e,t)=>l(e,t),p={"dd MMM 'yy":(e,t)=>`${c(e,t)} ${l(e,t)} '${u(e,t)}`,"MMM dd, yyyy":(e,t)=>`${l(e,t)} ${c(e,t)}, ${d(e,t)}`,"MMM dd":(e,t)=>`${l(e,t)} ${c(e,t)}`,"yyyy-MM-dd":(e,t)=>`${d(e,t)}-${h(e,t)}-${c(e,t)}`,"yy-MM-dd":(e,t)=>`${u(e,t)}-${h(e,t)}-${c(e,t)}`,"yy/MM/dd":(e,t)=>`${u(e,t)}/${h(e,t)}/${c(e,t)}`,
"yyyy/MM/dd":(e,t)=>`${d(e,t)}/${h(e,t)}/${c(e,t)}`,"dd-MM-yyyy":(e,t)=>`${c(e,t)}-${h(e,t)}-${d(e,t)}`,"dd-MM-yy":(e,t)=>`${c(e,t)}-${h(e,t)}-${u(e,t)}`,"dd/MM/yy":(e,t)=>`${c(e,t)}/${h(e,t)}/${u(e,t)}`,"dd/MM/yyyy":(e,t)=>`${c(e,t)}/${h(e,t)}/${d(e,t)}`,"MM/dd/yy":(e,t)=>`${h(e,t)}/${c(e,t)}/${u(e,t)}`,"MM/dd/yyyy":(e,t)=>`${h(e,t)}/${c(e,t)}/${d(e,t)}`},g=Object.keys(p),m=()=>-1!==["ja","ko","zh","zh_TW"].indexOf(window.language||"")?"yyyy-MM-dd":"dd MMM 'yy"},920358:(e,t,n)=>{"use strict";n.r(t),n.d(t,{getPriceAlertsDispatcher:()=>s,getPriceAlertsDispatcherIfExists:()=>o,setPriceAlertsDispatcherIfNotExists:()=>r});n(659863);let i=null;function s(){return new Promise(e=>{null===i?Promise.all([n.e(68647),n.e(83912),n.e(95925),n.e(14915),n.e(98313),n.e(35853),n.e(48158)]).then(n.bind(n,335853)).then(t=>{null===i&&(i=new t.AlertsDispatcher),e(i)}):e(i)})}function o(){return i}function r(e){return null===i&&(i=e,!0)}},3008:(e,t,n)=>{"use strict";function i(e,t,n){return e*(1-n)+t*n}n.d(t,{lerp:()=>i,doAnimate:()=>r});const s={from:0,duration:250,easing:n(876242).easingFunc.easeOutCubic};class o{constructor(e){this._doing=!0,this._completed=!1,this._options={...s,...e};const t=performance.now();window.requestAnimationFrame(e=>{this._animation(t,this._options.from,e)})}stop(){this._doing=!1}completed(){return this._completed}_animation(e,t,n){if(!this._doing)return void this._finishAnimation();const s=(n=!n||n<1e12?performance.now():n)-e,o=s>=this._options.duration||t===this._options.to,r=i(this._options.from,this._options.to,this._options.easing(s/this._options.duration)),a=o?this._options.to:r,c=a-t;this._options.onStep(c,a),o?this._finishAnimation():window.requestAnimationFrame(t=>{this._animation(e,a,t)})}_finishAnimation(){this._options.onComplete&&this._options.onComplete(),this._completed=!0}}function r(e){return new o(e)}},246433:(e,t,n)=>{"use strict";var i;n.d(t,{ConnectionStatus:()=>i}),function(e){e[e.Closed=0]="Closed",e[e.Connecting=1]="Connecting",e[e.Open=2]="Open"}(i||(i={}))},673438:(e,t,n)=>{"use strict";n.d(t,{PersistentTransport:()=>h});var i=n(246433),s=n(55111),o=n(262325),r=n.n(o),a=n(97639),c=n.n(a),l=n(761068);class h{constructor(e,t){this._url="",this._socket=null,this._reconnectCount=0,this._onlineCancellationToken=null,this._connectionStatus=new(r())(i.ConnectionStatus.Closed),this._socketCloseHandler=this._onCloseCallback.bind(this),this._socketErrorHandler=this._onErrorCallback.bind(this),this._socketOpenHandler=this._onOpenCallback.bind(this),this._socketMessageHandler=this._onMessageCallback.bind(this),this._maxReconnectReachedEventDelegate=new(c()),this._shouldReconnect=!0,this._maxReconnectCount=null,this._reconnectTimeoutId=0,this._connectAbortController=null,this._tryReconnect=()=>{if(this._disconnect(),this._shouldReconnect){const e=this._getReconnectTimeout();this._logger.logNormal(`Sleeping some time before reconnect ${e}ms`),this._reconnectTimeoutId=setTimeout(this._tryReconnectImpl.bind(this),e)}else this._logger.logNormal("Skip reconnecting because of shouldReconnect state")},
this._onOfflineHandler=()=>{this._removeOnOfflineListener(),this._logger.logInfo("Network status changed to offline - trying to reconnect"),this._tryReconnect()},this._logger=t,this._messageHandler=e,window.addEventListener("unload",()=>{t.logNormal("Unload event comes - disconnecting without reconnect after that..."),this._shouldReconnect=!1,this._disconnect()},!1)}setUrl(e){if(this._url===e)return;const t=this._connectionStatus.value()!==i.ConnectionStatus.Closed;t&&this._disconnect(),this._url=e,t&&this.connect()}url(){return this._url}connect(){this._connectImpl()}setMaxReconnectCount(e){this._maxReconnectCount=e}connectionStatus(){return this._connectionStatus.readonly()}disconnect(){this._shouldReconnect=!1,this._disconnect()}maxReconnectReachedEvent(){return this._maxReconnectReachedEventDelegate}async _prepareParamsForConnection(e){}_disconnect(){var e;null===(e=this._connectAbortController)||void 0===e||e.abort(),this._connectAbortController=null,clearTimeout(this._reconnectTimeoutId),this._reconnectTimeoutId=0,this._connectionStatus.value()!==i.ConnectionStatus.Closed?this._socket?(this._logger.logNormal(`Closing connection to: ${this._socket.url}, currentStatus: ${i.ConnectionStatus[this._connectionStatus.value()]}`),this._disconnectTransport()):this._logger.logNormal("Disconnecting without socket - probably within preparing, it should be already scheduled for aborting"):this._logger.logNormal("Attempt to close connection but it is closed already")}_onErrorCallback(){this._logger.logInfo("Connection is closed by error"),this._tryReconnect()}_onCloseCallback(e){this._logger.logInfo(`Connection is closed - code=${e.code} msg=${e.reason}`),this._tryReconnect()}_tryReconnectImpl(){return null!==this._maxReconnectCount&&this._reconnectCount===this._maxReconnectCount?(this._logger.logWarn("Maximum attempts to reconnect to websocket reached"),void this._maxReconnectReachedEventDelegate.fire()):(this._reconnectCount+=1,this._logger.logInfo("Reconnecting count: "+this._reconnectCount),navigator.onLine?(this._logger.logInfo("Network status: online - trying to connect"),void this.connect()):(this._logger.logInfo("Network status: offline - wait until online"),void(this._onlineCancellationToken=(0,s.callWhenOnline)(()=>{this._logger.logInfo("Network status changed to online - trying to connect"),this.connect()}))))}_onOpenCallback(){this._logger.logNormal("Connection opened"),this._reconnectCount=0,this._connectionStatus.setValue(i.ConnectionStatus.Open)}_onMessageCallback(e){this._messageHandler(e.data)}_getReconnectTimeout(){return this._reconnectCount<5?300:5e3}_setOnOfflineListener(){window.addEventListener("offline",this._onOfflineHandler)}_removeOnOfflineListener(){window.removeEventListener("offline",this._onOfflineHandler)}async _connectImpl(){if(this._connectionStatus.value()!==i.ConnectionStatus.Closed)return void this._logger.logNormal("Attempt to open connection but it is not closed");this._socket&&(this._logger.logError("Something went wrong - code 0x2"),this.disconnect()),
this._onlineCancellationToken&&(this._onlineCancellationToken(),this._onlineCancellationToken=null),this._logger.logNormal("Connecting to "+this._url),this._shouldReconnect=!0,this._connectAbortController=new AbortController;const e=this._connectAbortController.signal;try{if(this._connectionStatus.setValue(i.ConnectionStatus.Connecting),await this._prepareParamsForConnection(e),e.aborted)throw(0,l.createAbortError)();this._socket=this._createNativeTransport(this._url),this._setOnOfflineListener()}catch(e){this._connectionStatus.setValue(i.ConnectionStatus.Closed),(0,l.skipAbortError)(e)}finally{this._connectAbortController=null}}}},394485:(e,t,n)=>{"use strict";n.d(t,{PersistentWebsocketTransport:()=>a});var i=n(911905),s=n(246433),o=n(673438);const r=(0,i.getLogger)("PersistentWebsocketTransport");class a extends o.PersistentTransport{constructor(e){super(e,r)}sendMessage(e){this._connectionStatus.value()===s.ConnectionStatus.Open?this._socket?this._socket.send(e):r.logError("Something went wrong - code 0x3"):r.logWarn("Attempt to send message but connection is not opened")}_createNativeTransport(e){const t=new WebSocket(e);return t.binaryType="arraybuffer",t.addEventListener("error",this._socketErrorHandler),t.addEventListener("close",this._socketCloseHandler),t.addEventListener("open",this._socketOpenHandler),t.addEventListener("message",this._socketMessageHandler),t}_disconnectTransport(){if(null===this._socket)return;this._socket.removeEventListener("error",this._socketErrorHandler),this._socket.removeEventListener("close",this._socketCloseHandler),this._socket.removeEventListener("open",this._socketOpenHandler),this._socket.removeEventListener("message",this._socketMessageHandler),this._removeOnOfflineListener();const e=this._socket;this._socket=null,this._connectionStatus.setValue(s.ConnectionStatus.Closed),e.readyState!==WebSocket.CLOSED&&e.close()}}},348102:(e,t,n)=>{"use strict";n.d(t,{getCountries:()=>o});var i=n(86674);let s=null;async function o(){var e;if(null!==s)return s;const t=await(0,i.fetch)("/accounts/countries/",{credentials:"include"});if(!t.ok){const e=await t.json();throw Error(String(e))}const n=await t.json();return s={...n,current_country_code:null!==(e=n.current_country_code)&&void 0!==e?e:"US"},s}},483601:(e,t,n)=>{"use strict";var i,s;n.d(t,{PredefinedAction:()=>i,ContentAlign:()=>s}),function(e){e.Close="close",e.OpenGopro="openGopro"}(i||(i={})),function(e){e.Center="center",e.Left="left"}(s||(s={}))},338733:(e,t,n)=>{"use strict";function i(e){
return Promise.all([n.e(48463),n.e(69129),n.e(2e3),n.e(82888),n.e(69875),n.e(8879),n.e(86363),n.e(15998),n.e(25113),n.e(34956),n.e(7427),n.e(66333),n.e(18844),n.e(31205),n.e(93713),n.e(47552),n.e(25380),n.e(3848),n.e(81692),n.e(24555),n.e(17662),n.e(67546),n.e(69565),n.e(51891),n.e(6750),n.e(5723),n.e(1320),n.e(61270),n.e(31253),n.e(62525),n.e(30413),n.e(81201),n.e(24731),n.e(18343),n.e(77970),n.e(13322),n.e(78679),n.e(44041),n.e(55053),n.e(75514),n.e(91201),n.e(53262),n.e(85518),n.e(65004),n.e(88460),n.e(56156),n.e(68690),n.e(98233),n.e(78703)]).then(n.bind(n,783188)).then(t=>t.openPaymentOrderDialog(e))}n.r(t),n.d(t,{showPaymentOrderDialog:()=>i})},706162:(e,t,n)=>{"use strict";var i;n.d(t,{StatusExtraData:()=>i}),function(e){e.Enable="enable",e.Disable="disable"}(i||(i={}))},459689:(e,t,n)=>{"use strict";n.d(t,{check:()=>s});var i=n(348102);async function s(){const{is_restricted:e}=await(0,i.getCountries)();return e}},224314:(e,t,n)=>{"use strict";n.r(t),n.d(t,{showRestrictedCountryNotificationDialog:()=>o});var i=n(787236),s=n(779923);function o(){(0,s.showWarning)({title:(0,i.t)("We can't accept your payment right now"),text:(0,i.t)("TradingView needs to comply with U.S. trade embargoes and economic sanctions, so we're unable to accept any payments from the region you're in at the moment.")})}},619101:(e,t,n)=>{"use strict";n.d(t,{showSupportDialog:()=>i});n(659863);function i(e){return Promise.all([n.e(48463),n.e(69875),n.e(80509),n.e(8879),n.e(15998),n.e(10108),n.e(7427),n.e(50656),n.e(66333),n.e(18844),n.e(31205),n.e(93713),n.e(47552),n.e(16061),n.e(84575),n.e(23450),n.e(17662),n.e(49587),n.e(79486),n.e(35437),n.e(89915),n.e(83782),n.e(31253),n.e(48247),n.e(40681),n.e(34413),n.e(44054),n.e(75514),n.e(59420),n.e(23127),n.e(24951),n.e(52109),n.e(4433),n.e(13345),n.e(26612),n.e(90186),n.e(77746),n.e(57274)]).then(n.bind(n,24056)).then(t=>new t.SupportDialog(e).open())}},735357:(e,t,n)=>{"use strict";var i=n(787236).t;n(897116);var s=n(324951),o=n(414879),r=o.WeekDays,a=o.Months,c=n(936410),l=c.monthsFullNames,h=c.monthsShortNames,u=c.weekDaysFullNames,d=c.weekDaysShortNames,_=c.weekDaysMiniNames;window.language&&(s.locale(window.language,{months:[l[a.JANUARY],l[a.FEBRUARY],l[a.MARCH],l[a.APRIL],l[a.MAY],l[a.JUNE],l[a.JULY],l[a.AUGUST],l[a.SEPTEMBER],l[a.OCTOBER],l[a.NOVEMBER],l[a.DECEMBER]],monthsShort:[h[a.JANUARY],h[a.FEBRUARY],h[a.MARCH],h[a.APRIL],h[a.MAY],h[a.JUNE],h[a.JULY],h[a.AUGUST],h[a.SEPTEMBER],h[a.OCTOBER],h[a.NOVEMBER],h[a.DECEMBER]],weekdays:[u[r.SUNDAY],u[r.MONDAY],u[r.TUESDAY],u[r.WEDNESDAY],u[r.THURSDAY],u[r.FRIDAY],u[r.SATURDAY]],weekdaysShort:[d[r.SUNDAY],d[r.MONDAY],d[r.TUESDAY],d[r.WEDNESDAY],d[r.THURSDAY],d[r.FRIDAY],d[r.SATURDAY]],weekdaysMin:[_[r.SUNDAY],_[r.MONDAY],_[r.TUESDAY],_[r.WEDNESDAY],_[r.THURSDAY],_[r.FRIDAY],_[r.SATURDAY]],longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MMM D",l:"M/D/YYYY",LL:"MMM D, YYYY",ll:"MMM D LT",LLL:"LT - LL",lll:"MMM D, YYYY LT",LLLL:"ddd D MMMM YYYY LT",llll:"ddd D MMM YYYY LT"},calendar:{
sameDay:i("{specialSymbolOpen}Today at{specialSymbolClose} {dayTime}").format({specialSymbolOpen:"[",specialSymbolClose:"]",dayTime:"LT"}),nextDay:i("{specialSymbolOpen}Tomorrow at{specialSymbolClose} {dayTime}").format({specialSymbolOpen:"[",specialSymbolClose:"]",dayTime:"LT"}),nextWeek:i("{dayName} {specialSymbolOpen}at{specialSymbolClose} {dayTime}").format({specialSymbolOpen:"[",specialSymbolClose:"]",dayTime:"LT",dayName:"dddd"}),lastDay:i("{specialSymbolOpen}Yesterday at{specialSymbolClose} {dayTime}").format({specialSymbolOpen:"[",specialSymbolClose:"]",dayTime:"LT"}),lastWeek:i("{specialSymbolOpen}Last{specialSymbolClose} {dayName} {specialSymbolOpen}at{specialSymbolClose} {dayTime}").format({specialSymbolOpen:"[",specialSymbolClose:"]",dayTime:"LT",dayName:"dddd"}),sameElse:"L"},relativeTime:{future:function(e){return e===i("just now")?e:i("in %s",{context:"time_range"}).replace("%s",e)},past:function(e){return e===i("just now")?e:i("%s ago",{context:"time_range"}).replace("%s",e)},s:i("just now"),m:function(e){return i("%d minute",{plural:"%d minutes",count:e}).replace("%d",e)},mm:function(e){return i("%d minute",{plural:"%d minutes",count:e}).replace("%d",e)},h:i("an hour"),hh:function(e){return i("%d hour",{plural:"%d hours",count:e}).replace("%d",e)},d:i("a day"),dd:function(e){return i("%d day",{plural:"%d days",count:e}).replace("%d",e)},M:i("a month"),MM:function(e){return i("%d month",{plural:"%d months",count:e}).replace("%d",e)},y:i("a year"),yy:function(e){return i("%d year",{plural:"%d years",count:e}).replace("%d",e)}},week:{dow:1,doy:4}}),s.locale(window.language)),e.exports=s},314370:(e,t,n)=>{"use strict";var i=n(86674).fetch,s=n(893278).visitPaymentPage,o=n(888035).BillingCycle,r=n(97639),a=n(588948).getFreshInitData;n(860779);var c=a();function l(e){if(this._freeProductIds=["tv-scripting","tv-basicstudies","tv-prostudies","Script$USER","Script$EDGR","ESD$TV"],this.packagesUpdated=new r,!e)return this._products=this._discounts={},void(this._offers=this._order=[]);this._products={},this._discounts={},this._offers=e.offers,this._order=[],this._invalidShopConf=!0,"undefined"!=typeof window&&window.loginStateChange.subscribe(this,this.onLoginStateChange)}l.prototype.PRODUCT_TYPES={pro_plan:1,study_package:2,news_feed:3,exchange:4,connection:6,coins:8},l.prototype.updateShopConf=function(e){return this._shopConfPromise||(this._shopConfPromise=i("/market/shopconf/",{credentials:"include"}).then((function(e){return e.json()})).then(function(t){this._products=t.all_products&&JSON.parse(t.all_products)||{},this._discounts=t.discounts&&JSON.parse(t.discounts)||{},this._offers=t.offers&&JSON.parse(t.offers)||[],this._order=t.order&&JSON.parse(t.order)||[],this._invalidShopConf=!1,delete this._shopConfPromise,e||this.packagesUpdated.fire()}.bind(this)).catch(function(){delete this._shopConfPromise}.bind(this))),this._shopConfPromise},l.prototype.invalidateShopConf=function(){this._invalidShopConf=!0},l.prototype.isInvalidShopConf=function(){return!!this._invalidShopConf},
l.prototype.ensureValidShopConf=function(){return new Promise(function(e){return this.runOrUpdate(e)}.bind(this))},l.prototype.onLoginStateChange=function(e){e||this.updateShopConf()},l.prototype.runOrUpdate=function(e,t){this.isInvalidShopConf()?this.updateShopConf(t).then(e):e()},l.prototype.getIDCExchanges=function(e){var t=this._products;if(c)if(e){if(c.idc_delay_exchanges_list)return c.idc_delay_exchanges_list}else if(c.idc_exchanges_list)return c.idc_exchanges_list;return Object.keys(t).filter((function(n){return e?t[n].idc_service_codes_delay:t[n].idc_service_codes})).map((function(e){return t[e].exchange}))},l.prototype.getProduct=function(e){if(e in this._products)return this._products[e];if(this.isDiscountProductId(e)){var t=this._discounts[e],n=Object.assign({discount_text_id:e},this._products[t.product]);return t.cost&&(n.cost=t.cost),t.cost_annual&&(n.cost_annual=t.cost_annual),t.cost_biennial&&(n.cost_biennial=t.cost_biennial),void 0!==t.fixed_cost&&(n.fixed_cost=t.fixed_cost),void 0!==t.extra_days&&(n.extra_days=t.extra_days),void 0!==t.billing_cycle&&(n.billing_cycle=t.billing_cycle),n}return{}},l.prototype.findProduct=function(e){return new Promise(function(t){var n=function(){t(this.getProduct(e))}.bind(this);if(!this.isInvalidShopConf())return n();this.updateShopConf().then(n).catch(n)}.bind(this))},l.prototype.isProductDefined=function(e){return!(!e||!Object.keys(e).length)},l.prototype.getDiscountProduct=function(e){return this._discounts[e]||{}},l.prototype.isOffer=function(e,t){var n=this._discounts;return Object.keys(n).filter((function(e){return!n[e].expired&&n[e].offer_type===t})).includes(e)},l.prototype.getProductId=function(e){return e&&(e.discount_text_id||e.text_id)||""},l.prototype.isDiscountProductId=function(e){return e in this._discounts},l.prototype.isPlan=function(e){return e.type===this.PRODUCT_TYPES.pro_plan},l.prototype.isExchange=function(e){return e.type===this.PRODUCT_TYPES.exchange},l.prototype.getActiveExchanges=function(){return this.getProductsByType(this.PRODUCT_TYPES.exchange).filter((function(e){return!e.disabled&&Boolean(e.cost)}))},l.prototype.getExchange=function(e){for(var t,n=this.getProductsByType(this.PRODUCT_TYPES.exchange),i=0;i<n.length;i+=1)if((t=n[i]).exchange===e||t.included_exchanges&&t.included_exchanges.includes(e))return t;return{}},l.prototype.getCost=function(e,t){var n=1;if(o.TwoYears===t){if(e.fixed_cost||(n=24),e.cost_biennial)return e.cost_biennial*n;if(e.cost_annual)return e.cost_annual*n}else if(o.OneYear===t){if(e.fixed_cost||(n=12),e.cost_annual)return e.cost_annual*n}else o.ThreeMonths===t&&(e.fixed_cost||(n=3));return e.cost,e.cost*n},l.prototype.getProductsByType=function(e){return Object.keys(this._products).filter((function(t){return this._products[t].type===e}),this).map((function(e){return this.getProduct(e)}),this).sort((function(e,t){return t.order>e.order?-1:t.order<e.order?1:0}))},l.prototype.getProPlans=function(e){return this.getProductsByType(this.PRODUCT_TYPES.pro_plan).filter((function(t){return!e||!t.is_limited
})).map((function(e){return e.text_id}))},l.prototype.getSuperProduct=function(e){for(var t in this._products){var n=this._products[t];if(n.subproduct_ids&&n.subproduct_ids.indexOf(e)>=0)return n.id}},l.prototype.getStudiesOrder=function(){return this._order.filter((function(e){return this._products[e]&&this._products[e].type===this.PRODUCT_TYPES.study_package}),this)},l.prototype.hasPackage=function(e){return this._offers.includes(e)||this._freeProductIds.includes(e)},l.prototype._getUser=function(){return window.user},l.prototype.updateUser=function(){},l.prototype.isPro=function(){return!!this._getUser().pro_plan},l.prototype.isTrial=function(){return!!this._getUser().is_trial},l.prototype.isPaidPro=function(){return this.isPro()&&!this.isTrial()},l.prototype.userHasRealtimeForExchange=function(e){e=(e||"").toLowerCase().replace("exchange-","");var t=this.getExchange(e);if(!this.isProductDefined(t))return!1;if(this._offers.includes("exchange-"+t.exchange))return!0;if(t.included_exchanges)for(var n=0;n<t.included_exchanges.length;n+=1)if(this._offers.includes("exchange-"+t.included_exchanges[n]))return!0;return!1},l.prototype._exHasRealtimeForType=function(e,t){return!("stock"===t&&!e.is_stocks)&&(!("index"===t&&!e.is_indices)&&!("futures"===t&&!e.is_futures))},l.prototype.hasRealtimeForExchange=function(e,t){var n,i,s=pro.getProductsByType(pro.PRODUCT_TYPES.exchange);e=(e||"").toLowerCase();for(var o=0;o<s.length;o+=1)if((n=s[o]).exchange===e||(n.included_exchanges||[]).includes(e)){if(n.disabled&&!n.included_exchanges)return!1;if(!t)return!0;if(n.included_exchanges){for(var r,a=0;a<n.included_exchanges.length;a+=1)if(i=this.getProduct("exchange-"+n.included_exchanges[a]),this.isProductDefined(i)&&this._exHasRealtimeForType(i,t)){r=!0;break}if(!r)return!1}else if(!this._exHasRealtimeForType(n,t))return!1;return!0}return!1},l.prototype.visitExchangesPage=function(e){var t=o.Monthly,n=!0,i=this._getUser();i.is_trial||(t=i.pro_plan_billing_cycle||o.OneYear,n=!1),s(t,{exchangesOnly:!0,newWindow:(e=e||{}).newWindow,paymentMethod:e.paymentMethod,fixedCycle:n})},l.prototype.offerLogoSrc=function(e){return e.has_logo?"/static/images/indicators/logos/"+e.text_id+".png":null},l.prototype.offers=function(){return this._offers},l.prototype.isSupportAvailable=function(){return Boolean(c.is_support_available)},l.prototype.discounts=function(){return this._discounts},l.prototype.hash=function(){var e=this._offers.slice(0);e.sort();var t={offers:e};return JSON.stringify(t)},"undefined"!=typeof window&&window.TradingView&&(window.TradingView.Pro=l),e.exports=l},761068:(e,t,n)=>{"use strict";function i(e){let t=null;return(n,...i)=>(null==t||t.abort(),t=new AbortController,null==n||n.addEventListener("error",()=>null==t?void 0:t.abort(),{once:!0}),e(t.signal,...i))}function s(e){if(!c(e))throw e}function o(e){if(c(e))throw e}function r(e){return(null==e?void 0:e.aborted)?Promise.reject(a()):new Promise((t,n)=>{null==e||e.addEventListener("abort",()=>n(a()),{once:!0})})}function a(){return new DOMException("Aborted","AbortError")}
function c(e){return e instanceof Error&&"AbortError"===e.name}function l(e,t){return Promise.race([r(e),t])}async function h(e,t){let n;try{await l(e,new Promise(e=>{n=setTimeout(e,t)}))}finally{clearTimeout(n)}}n.d(t,{respectLatest:()=>i,skipAbortError:()=>s,rethrowAbortError:()=>o,createAbortError:()=>a,isAbortError:()=>c,respectAbort:()=>l,delay:()=>h})},55111:(e,t,n)=>{"use strict";n.d(t,{callWhenOnline:()=>s,waitForOnline:()=>o});var i=n(761068);function s(e){let t=e;const n=()=>{window.removeEventListener("online",n),t&&t()};return window.addEventListener("online",n),()=>{t=null}}async function o(e=null){return!0===navigator.onLine||void 0===navigator.onLine?Promise.resolve():(0,i.respectAbort)(e,new Promise(e=>{const t=()=>{window.removeEventListener("online",t),e()};window.addEventListener("online",t)}))}},514998:(e,t,n)=>{"use strict";function i(e){return decodeURIComponent(e.replace(/\+/g," ")).replace(/<\/?[^>]+(>|$)/g,"")}function s(e){const t=/([^&=]+)=?([^&]*)/g,n={};if(!e)return n;let s=t.exec(e);for(;s;)n[i(s[1])]=i(s[2]),s=t.exec(e);return n}function o(){return s(window.location.search.substring(1))}function r(){return s(window.location.hash.split("#")[1])}function a(e){const t=[];for(const n in e)e.hasOwnProperty(n)&&null!=e[n]&&t.push({key:n,pair:encodeURIComponent(n)+"="+encodeURIComponent(e[n])});return t.sort((e,t)=>e.key>t.key?1:e.key<t.key?-1:0).map(e=>e.pair).join("&")}n.r(t),n.d(t,{decode:()=>i,getQueryParams:()=>s,getUrlParams:()=>o,getHashUrlParams:()=>r,createUrlParams:()=>a})},893278:(e,t,n)=>{"use strict";n.d(t,{visitPaymentPage:()=>u});var i=n(787236),s=n(698969),o=n(338733),r=n(888035),a=n(125226),c=n(706162),l=n(459689),h=n(224314);function u(e="y",t={}){var n;const u=null!==(n=t.productName)&&void 0!==n?n:"pro",d=t.paymentMethod||"paypal",_="bitcoin"===d?"Bitcoin payment":"Paypal payment";window.runOrSignIn(async()=>{if(await(0,l.check)())return void(0,h.showRestrictedCountryNotificationDialog)();if("function"==typeof t.canVisit&&!t.canVisit())return void(location.href="/");if((0,a.isFeatureEnabled)("braintree-trial-implementation"))return void(0,o.showPaymentOrderDialog)({productId:t.productName,billingCycle:t.exchangesOnly?r.BillingCycle.Monthly:e,fixedCycle:t.fixedCycle,statusExtraData:t.exchangesExpanded?c.StatusExtraData.Enable:void 0});const n=(0,s.parseHtmlElement)(`<form action="/order/" method="post" ${t.newWindow?'target="_blank"':""}>\n\t\t\t\t\t<input type="hidden" name="product" value="${u}"/>\n\t\t\t\t\t<input type="hidden" name="billing_cycle" value="${e}"/>\n\t\t\t\t\t<input type="hidden" name="fixed_billing_cycle" value="${t.fixedCycle?"1":""}"/>\n\t\t\t\t\t<input type="hidden" name="exchanges_only" value="${t.exchangesOnly?"1":""}"/>\n\t\t\t\t\t<input type="hidden" name="exchanges_expanded" value="${t.exchangesExpanded?"1":""}"/>\n\t\t\t\t\t<input type="hidden" name="selected_packages" value="${(t.selectedPackages||[]).join(",")}"/>\n\t\t\t\t\t<input type="hidden" name="payment_method" value="${d}"/>\n\t\t\t\t</form>`);n&&(document.body.appendChild(n),n.submit())
},{source:_,paidAccountCheck:window.pro&&window.pro.getProduct(u).type===window.pro.PRODUCT_TYPES.pro_plan,paidAccountSuccessButtonText:(0,i.t)("Continue purchasing")})}},975420:(e,t,n)=>{"use strict";n.d(t,{initGA:()=>l,trackTiming:()=>h});var i=n(251954),s=n(261030),o=n(588948),r=n(638456),a=n(691805);let c=!1;function l(){if(c)return;(0,o.updateInitData)();const e=(0,o.getInitData)();if(!e.gaId)return;c=!0,(0,a.appendScript)("https://www.googletagmanager.com/gtag/js?id="+(0,o.getInitData)().gaId),window.dataLayer=window.dataLayer||[],window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date);const t={optimize_id:e.optimizeId,anonymize_ip:!0};window.TVD&&(t.app_name="TVD",t.app_version=(0,r.desktopAppVersion)()),e.gaVars&&window.gtag("set",e.gaVars),window.gtag("consent","default",{analytics_storage:(0,s.getCookieSetting)(s.CookieSettings.Analytics)?"granted":"denied"}),window.gtag("config",e.gaId,t),i.subscribe(s.cookieSettingsChangeEvent,(e,t)=>{e===s.CookieSettings.Analytics&&window.gtag("consent","update",{analytics_storage:t?"granted":"denied"})},null)}function h(e,t,n,i){l(),window.gtag("event","timing_complete",{name:t,value:n,event_category:e,event_label:i})}},849289:(e,t,n)=>{"use strict";var i,s,o,r=n(823127),a=n(77034);function c(){return i||(this instanceof c?void(i=this):new c)}c.prototype.browser=function(){return s||(s=a.name+" "+a.version),s},c.prototype.setBrowser=function(e){"string"==typeof e&&e&&(s=e)},c.prototype.os=function(){if(!o){var e=Object.keys(a);o=["mac","windows","windowsphone","linux","chromeos","android","ios","blackberry","firefoxos","webos","bada","tizen","sailfish"].filter((function(t){return e.includes(t)}))[0]}return o},c.prototype.setOS=function(e){"string"==typeof e&&e&&(o=e)},c.prototype.cookieEnabled=function(){return navigator.cookieEnabled},c.prototype.viewportSize=function(){return r(window).width()+" x "+r(window).height()},c.prototype.screenSize=function(){return window.screen&&(screen.width||screen.availWidth)+" x "+(screen.height||screen.availHeight)||"unknown"},c.prototype.colorDepth=function(){return window.screen&&screen.colorDepth||"unknown"},c.prototype.pixelRatio=function(){return window.devicePixelRatio||0},c.prototype.wsTestResult=function(){return"Pending"},c.prototype.state=function(){return{os:this.os(),browser:this.browser(),cookieEnabled:this.cookieEnabled(),viewportSize:this.viewportSize(),screenSize:this.screenSize(),colorDepth:this.colorDepth(),pixelRatio:this.pixelRatio()}},e.exports=c},414879:(e,t,n)=>{"use strict";var i,s;n.r(t),n.d(t,{WeekDays:()=>i,Months:()=>s}),function(e){e[e.SUNDAY=1]="SUNDAY",e[e.MONDAY=2]="MONDAY",e[e.TUESDAY=3]="TUESDAY",e[e.WEDNESDAY=4]="WEDNESDAY",e[e.THURSDAY=5]="THURSDAY",e[e.FRIDAY=6]="FRIDAY",e[e.SATURDAY=7]="SATURDAY"}(i||(i={})),function(e){e[e.JANUARY=0]="JANUARY",e[e.FEBRUARY=1]="FEBRUARY",e[e.MARCH=2]="MARCH",e[e.APRIL=3]="APRIL",e[e.MAY=4]="MAY",e[e.JUNE=5]="JUNE",e[e.JULY=6]="JULY",e[e.AUGUST=7]="AUGUST",e[e.SEPTEMBER=8]="SEPTEMBER",e[e.OCTOBER=9]="OCTOBER",e[e.NOVEMBER=10]="NOVEMBER",
e[e.DECEMBER=11]="DECEMBER"}(s||(s={}))},936410:(e,t,n)=>{"use strict";n.r(t),n.d(t,{monthsFullNames:()=>o,monthsShortNames:()=>r,weekDaysFullNames:()=>a,weekDaysShortNames:()=>c,weekDaysMiniNames:()=>l});var i=n(787236),s=n(414879);const o={[s.Months.JANUARY]:(0,i.t)("January"),[s.Months.FEBRUARY]:(0,i.t)("February"),[s.Months.MARCH]:(0,i.t)("March"),[s.Months.APRIL]:(0,i.t)("April"),[s.Months.MAY]:(0,i.t)("May"),[s.Months.JUNE]:(0,i.t)("June"),[s.Months.JULY]:(0,i.t)("July"),[s.Months.AUGUST]:(0,i.t)("August"),[s.Months.SEPTEMBER]:(0,i.t)("September"),[s.Months.OCTOBER]:(0,i.t)("October"),[s.Months.NOVEMBER]:(0,i.t)("November"),[s.Months.DECEMBER]:(0,i.t)("December")},r={[s.Months.JANUARY]:(0,i.t)("Jan"),[s.Months.FEBRUARY]:(0,i.t)("Feb"),[s.Months.MARCH]:(0,i.t)("Mar"),[s.Months.APRIL]:(0,i.t)("Apr"),[s.Months.MAY]:(0,i.t)("May",{context:"short"}),[s.Months.JUNE]:(0,i.t)("Jun"),[s.Months.JULY]:(0,i.t)("Jul"),[s.Months.AUGUST]:(0,i.t)("Aug"),[s.Months.SEPTEMBER]:(0,i.t)("Sep"),[s.Months.OCTOBER]:(0,i.t)("Oct"),[s.Months.NOVEMBER]:(0,i.t)("Nov"),[s.Months.DECEMBER]:(0,i.t)("Dec")},a={[s.WeekDays.SUNDAY]:(0,i.t)("Sunday"),[s.WeekDays.MONDAY]:(0,i.t)("Monday"),[s.WeekDays.TUESDAY]:(0,i.t)("Tuesday"),[s.WeekDays.WEDNESDAY]:(0,i.t)("Wednesday"),[s.WeekDays.THURSDAY]:(0,i.t)("Thursday"),[s.WeekDays.FRIDAY]:(0,i.t)("Friday"),[s.WeekDays.SATURDAY]:(0,i.t)("Saturday")},c={[s.WeekDays.SUNDAY]:(0,i.t)("Sun"),[s.WeekDays.MONDAY]:(0,i.t)("Mon"),[s.WeekDays.TUESDAY]:(0,i.t)("Tue"),[s.WeekDays.WEDNESDAY]:(0,i.t)("Wed"),[s.WeekDays.THURSDAY]:(0,i.t)("Thu"),[s.WeekDays.FRIDAY]:(0,i.t)("Fri"),[s.WeekDays.SATURDAY]:(0,i.t)("Sat")},l={[s.WeekDays.SUNDAY]:(0,i.t)("Su",{context:"day_of_week"}),[s.WeekDays.MONDAY]:(0,i.t)("Mo",{context:"day_of_week"}),[s.WeekDays.TUESDAY]:(0,i.t)("Tu",{context:"day_of_week"}),[s.WeekDays.WEDNESDAY]:(0,i.t)("We",{context:"day_of_week"}),[s.WeekDays.THURSDAY]:(0,i.t)("Th",{context:"day_of_week"}),[s.WeekDays.FRIDAY]:(0,i.t)("Fr",{context:"day_of_week"}),[s.WeekDays.SATURDAY]:(0,i.t)("Sa",{context:"day_of_week"})}},207678:(e,t,n)=>{"use strict";n.d(t,{breakpoints:()=>i,mobileFirstBreakpoints:()=>s,mobileFirstLegacyBreakpoints:()=>o});const i={desktop:1/0,desktopHd:1919,phone:767,"phone-vertical":479,tablet:1019},s={base:0,"media-mf-phone-vertical":320,"media-mf-phone-landscape":568,"media-mf-tablet-vertical":768,"media-mf-tablet-landscape":1024,"media-mf-laptop":1280,"media-mf-desktop-medium":1440,"media-mf-desktop-large":1920,"media-mf-desktop-extra-large":2560},o={"media-mf-legacy-phone-vertical":330,"media-mf-legacy-phone":480,"media-mf-legacy-notebook":1020,"media-mf-legacy-desktop-medium":1480,"media-mf-legacy-desktop":1531}},76107:(e,t,n)=>{"use strict";n.d(t,{getScrollbarWidth:()=>i,matchMediaMinMax:()=>s,getContentWidth:()=>o,setStyle:()=>r,getCSSProperty:()=>a,getCSSPropertyNumericValue:()=>c});const i=(()=>{let e;return()=>{var t;if(void 0===e){const n=document.createElement("div"),i=n.style;i.visibility="hidden",i.width="100px",i.msOverflowStyle="scrollbar",document.body.appendChild(n)
;const s=n.offsetWidth;n.style.overflow="scroll";const o=document.createElement("div");o.style.width="100%",n.appendChild(o);const r=o.offsetWidth;null===(t=n.parentNode)||void 0===t||t.removeChild(n),e=s-r}return e}})();function s(e,t){return t===1/0?window.matchMedia(`(min-width: ${e}px)`):window.matchMedia(`(min-width: ${e}px) and (max-width: ${t}px)`)}function o(e){return c(e,"width")-c(e,"padding-left")-c(e,"padding-right")}function r(e,t,n){null!==e&&e.style.setProperty(t,n)}function a(e,t){return getComputedStyle(e,null).getPropertyValue(t)}function c(e,t){return parseInt(a(e,t))}},850775:(e,t,n)=>{"use strict";n.d(t,{mediaState:()=>l});var i=n(685459),s=n.n(i),o=n(677748),r=n(207678),a=n(76107);class c extends(s()){constructor(){super(),this.width=0,this.height=0,this.device=null,this.breakpoints=r.breakpoints,this._checkDevice(),window.addEventListener("resize",this._checkDevice),Object.entries(r.breakpoints).sort(([e,t],[n,i])=>t-i).forEach(([e,t],n,i)=>{let s;if(0!==n){const[,e]=i[n-1];s=e+1}else s=0;const o=(0,a.matchMediaMinMax)(s,t);o.matches&&this._setNewDevice(e),o.addListener(t=>{t.matches&&(this._checkDevice(),this._setNewDevice(e))})}),(0,o.whenDocumentReady)(this._checkDevice.bind(this)),this.isPhoneSizeDevice.bind(this)}isPhoneSizeDevice(){return"phone"===this.device||"phone-vertical"===this.device}_checkDevice(){this.width=window.innerWidth,this.height=window.innerHeight}_setNewDevice(e){const t=this.device;this.device=e,this.trigger("changeDevice",[e,t])}}const l=new c},501867:(e,t,n)=>{"use strict";var i=n(95935),s=n(226722).TVXWindowEvents,o=n(345848).trackEvent,r=n(49437).TVLocalStorage,a=n(932496).PushStream,c=n(246433).ConnectionStatus,l=n(175203).telemetry,h=n(911905),u=h.getLogger,d=h.getRawLogHistory,_=u("PushStreamMultiplexer"),p=function(){var e,t=null,n=null,h={},u={},p=[],g=null,m="multiplexer-bc-",f="pushStreamMultiplexerState.",y=c.Closed,w=c.Closed,v=!1,S={_codeParams:function(e){return(e=Array.prototype.slice.call(e)).push((new Date).getTime()),JSON.stringify(e)},_decodeParams:function(e){var t=JSON.parse(e);return t.pop(),t},guid:i.guid(),_init:function(){if(this._needInstantiating())this._instantiatePushStream();else{var e=this._decodeConnectionStatus(r.getItem(this._connectionStatusKey));y=e[0],w=e[1]}setTimeout((function(){S.isConnected()||(_.logNormal("Not connected for a while after init..."),o("pushstream","not connected after init",navigator.userAgent))}),S._activityTimeout)},_instantiatePushStream:function(e){this._setMark(),t&&(o("PushstreamDoublePublic",window.user&&window.user.username||"Guest",navigator.userAgent),t.disconnect()),(t=new a(this._dispatchMessage.bind(this),{url:window.PUSHSTREAM_URL,urlPath:"message-pipe-ws"})).connectionStatus().subscribe(function(e){this._dispatchStatusChange(e,w)}.bind(this)),n&&(o("PushstreamDoublePrivate",window.user&&window.user.username||"Guest",navigator.userAgent),n.disconnect()),(n=new a(this._dispatchMessage.bind(this),{url:window.PUSHSTREAM_URL,urlPath:"message-pipe-ws"})).connectionStatus().subscribe(function(e){
this._dispatchStatusChange(y,e)}.bind(this)),this.on("pushstream_set_user_channel",function(e){this._setUserChannel(e)}.bind(this)),this._connectChannels(e)},_destructPushStream:function(){var e=t;t=null,e.disconnect(),e=n,n=null,e.disconnect(),this._dispatchStatusChangeFromOther(r.getItem(this._connectionStatusKey))},_activityTimeout:5e3,_delayTimeout:2e4,_pulseActivity:function(){this.ownPushStream()?this._lostOwn()?(_.logNormal("Lost own pushstream connection"),l.sendReport("site","pushstream_lost_own"),this._destructPushStream()):this._setMark():this._needInstantiating()&&!v&&(_.logNormal("Creating pushstream connection, because other tab lost it"),l.sendReport("site","pushstream_pick_up"),this._instantiatePushStream(this.getChannels()))},_markName:f+"mark",_lostOwn:function(){var e=r.getItem(this._markName);return!!e&&(e=this._decodeParams(e))[0]!==this.guid},_getMark:function(){return this._decodeParams(r.getItem(this._markName))},_setMark:function(){r.setItem(this._markName,this._codeParams([this.guid,(new Date).getTime()]))},_unsetMark:function(){r.setItem(this._markName,"")},_needInstantiating:function(){var e=r.getItem(this._markName);if(e){var t=(e=this._decodeParams(e))[1];return(new Date).getTime()-t>this._delayTimeout}return!0},_onRequestRecreate:function(e){if(!this.ownPushStream()&&this._needInstantiating()){var t=this._decodeParams(e)[0];_.logNormal("Creating pushstream connection after recreate request"),this._instantiatePushStream(t)}},_onUnload:function(){this.ownPushStream()&&(this._unsetMark(),this._sendRecreateRequest())},_getChannels:function(){return t.getChannels().concat(n.getChannels())},_channelsName:f+"channels",_getChannelsFromStorage:function(){var e=r.getItem(this._channelsName);return e?JSON.parse(e):[]},getChannels:function(){return this.ownPushStream()?this._getChannels():this._getChannelsFromStorage()},_storeChannels:function(){r.setItem(this._channelsName,JSON.stringify(this._getChannels()))},_sendRecreateRequest:function(){var e=this._getChannels();s.emit(this._xEventRecreate,this._codeParams([e]))},ownPushStream:function(){return!!t||!!n},pushStream:function(){if(!this.ownPushStream())throw new Error("Not own PushStream");return t},isConnected:function(){return y>0},status:function(){return y||c.Closed},statusPrivate:function(){return w||c.Closed},_userChannel:function(e){return"private_"+e},userChannel:function(){if(!g)throw new Error("No user channel");return this._userChannel(g)},_xEventRecreate:m+"recreate",_xEventSend:m+"send",_xEventChannelAdd:m+"channelAdd",_xEventChannelRemove:m+"channelRemove",_xEventRequiredChannels:m+"requirech",_xEventConnectionStatus:m+"connectionStatus",_xEventReconnectCommand:m+"reconnectCommand",_xEventRequestLogs:m+"requestLogs",_xEventShareLogs:m+"shareLogs",_shareLogsKey:f+"shareLogs",_connectionStatusKey:f+"connectionStatus",_addChannel:function(e){var i=e.startsWith("private_")?n:t;i.hasChannel(e)||(i.addChannel(e),this._storeChannels())},addChannel:function(e){
this.ownPushStream()?this._addChannel(e):s.emit(this._xEventChannelAdd,this._codeParams([e]))},_addChannelFromOther:function(e){var t=this._decodeParams(e)[0];this.ownPushStream()&&this._addChannel(t)},_removeChannel:function(e){var i=e.startsWith("private_")?n:t;i.hasChannel(e)&&(i.removeChannel(e),this._storeChannels())},removeChannel:function(e){this.ownPushStream()?this._removeChannel(e):s.emit(this._xEventChannelRemove,this._codeParams([e]))},_removeChannelFromOther:function(e){var t=this._decodeParams(e)[0];this.ownPushStream()&&this._removeChannel(t)},_connectChannels:function(e){t.addChannel("public"),void 0!==e&&e.length>0&&e.forEach((function(e){e.startsWith("private_")||t.hasChannel(e)||t.addChannel(e)})),"is_authenticated"in window?this._connectUserChannelInitial(!0):window.loginStateChange&&loginStateChange.subscribe(this,this._connectUserChannelInitial),t.connect()},_connectUserChannelInitial:function(e){e&&(is_authenticated?(g=user.private_channel,n.addChannel(this.userChannel()),n.connect()):g=null)},_changeLoginState:function(e){e||(is_authenticated?(g=user.private_channel,this.ownPushStream()&&(this._addChannel(this.userChannel()),n.connect())):(this.ownPushStream()&&(this._removeChannel(this.userChannel()),n.disconnect()),g=null))},_setUserChannel:function(e){_.logNormal("Set user channel "+e),e!==g&&(this.ownPushStream()&&g&&this._removeChannel(this.userChannel()),g=e,this.ownPushStream()&&g&&this._addChannel(this.userChannel()))},_dispatchStatusChange:function(e,t){this._dispatchStatusChangeToOthers(e,t),this._dispatchStatusChangeToSelf(e,t)},_dispatchStatusChangeToSelf:function(e,t){e!==y&&(y=e,this._callStatusHandlers(e,!1)),t!==w&&(w=t,this._callStatusHandlers(t,!0))},_callStatusHandlers:function(e,t){_.logNormal("Connection status change: "+e+", private "+t),l.sendReport("site","pushstream_status_change"),p.forEach((function(n){n.isPrivate===t&&n.handler(e)}))},_decodeConnectionStatus:function(e){var t=parseInt(e,10);return isNaN(t)?this._decodeParams(e):[t,t]},_dispatchStatusChangeFromOther:function(e){var t=this._decodeConnectionStatus(e),n=t[0],i=t[1];this.ownPushStream()||this._dispatchStatusChangeToSelf(n,i)},_dispatchStatusChangeToOthers:function(e,t){if(this.ownPushStream()){var n=this._codeParams([e,t]);r.setItem(this._connectionStatusKey,n),s.emit(this._xEventConnectionStatus,n)}},_dispatchMessage:function(e,t,n){this._dispatchMessageToOthers(e,t,n),this._dispatchMessageToSelf(e,t,n,!1)},_dispatchMessageToSelf:function(e,t,n,i){n=e.channel,e=e.content,this._emit(e,t,n,i)},_dispatchMessageToOthers:function(e,t,n){var i=[e,t,n,(new Date).getTime()];s.emit(this._xEventSend,this._codeParams(i))},_dispatchMessageFromOther:function(e){if(!this.ownPushStream()){var t=this._decodeParams(e),n=t[0],i=t[1],s=t[2];this._dispatchMessageToSelf(n,i,s,!0)}},_isSpecialChannel:function(e){return/\*/.test(e)},_emit:function(e,t,n,i){function s(s){s.call(this,e,t,n,i)}for(var o in h[n]&&h[n].forEach(s,this),u){var r="^"+o.replace(/\*/g,".*?")+"$";new RegExp(r).test(n)&&u[o].forEach(s,this)}},
on:function(e,t){var n=this._isSpecialChannel(e)?u:h;n[e]||(n[e]=[]),n[e].push(t)},off:function(e,t){var n=this._isSpecialChannel(e)?u:h;switch(arguments.length){case 0:h={},u={};break;case 1:n[e]&&delete n[e];break;default:if(n[e]){var i=n[e].indexOf(t);~i&&n[e].splice(i,1)}}},onStatus:function(e){p.push({handler:e,isPrivate:!1}),setTimeout((function(){e(y)}),0)},onPrivateStatus:function(e){p.push({handler:e,isPrivate:!0}),setTimeout((function(){e(w)}),0)},offStatus:function(e){p=p.filter((function(t){return t.handler!==e}))},forceConnect:function(){v=!1,_.logNormal("Creating pushstream connection after force connect"),this.ownPushStream()?(t.disconnect(),n.disconnect(),this._instantiatePushStream(this.getChannels())):this._needInstantiating()?this._instantiatePushStream():s.emit(this._xEventReconnectCommand,{})},disconnect:function(){this.ownPushStream()&&(this._destructPushStream(),this._unsetMark(),v=!0)},_dispatchReconnectCommandFromOther:function(){this.ownPushStream()&&this.forceConnect()},_getOwnLogs:function(e){if(this.ownPushStream()){var t=d(e,"PushStreamMultiplexer"),n=this.pushStream().getLogs();return[].concat(t,n)}return[]},_onRequestLogs:function(e){if(this.ownPushStream()){var t=this._getOwnLogs(e),n="";try{n=JSON.stringify(t)}catch(e){_.logError("Failed to stringify own pushstream logs")}r.setItem(this._shareLogsKey,n),s.emit(this._xEventShareLogs,n)}},getLogs:function(e){return new Promise(function(t){var n=setTimeout(function(){var e=r.getItem(this._shareLogsKey);t(null!==e?JSON.parse(e):[])}.bind(this),1e3),i=function(e){var o;s.off(this._xEventShareLogs,i),s.emit(this._xEventShareLogs,""),clearTimeout(n);try{o=JSON.parse(e)}catch(e){o=[],_.logError("Failed to parse logs received from master tab")}t(o)}.bind(this);this.ownPushStream()?t(this._getOwnLogs(e)):(s.on(this._xEventShareLogs,i),s.emit(this._xEventRequestLogs))}.bind(this))}};return S._init(),window.addEventListener("unload",S._onUnload.bind(S)),s.on(S._xEventRecreate,S._onRequestRecreate.bind(S)),s.on(S._xEventSend,S._dispatchMessageFromOther.bind(S)),s.on(S._xEventChannelAdd,S._addChannelFromOther.bind(S)),s.on(S._xEventChannelRemove,S._removeChannelFromOther.bind(S)),s.on(S._xEventConnectionStatus,S._dispatchStatusChangeFromOther.bind(S)),s.on(S._xEventReconnectCommand,S._dispatchReconnectCommandFromOther.bind(S)),s.on(S._xEventRequestLogs,S._onRequestLogs.bind(S)),e=function(){window.loginStateChange&&loginStateChange.subscribe(S,S._changeLoginState)},"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e),setInterval(S._pulseActivity.bind(S),S._activityTimeout),S._pulseActivity(),S}();e.exports=p},932496:(e,t,n)=>{"use strict";n.d(t,{PushStream:()=>a});var i=n(588537),s=n(394485),o=n(911905);const r=(0,o.getLogger)("PushStream");class a{constructor(e,t){this._channels=[],this._transport=new s.PersistentWebsocketTransport(this._onPushStreamMessage.bind(this)),this._settings=t,this._messageHandler=e}addChannel(e){(0,i.assert)(!this.hasChannel(e),"Channel already subscribed"),
r.logNormal("Adding channel "+e),this._channels.push(e),this._transport.setUrl(this._generateUrl())}removeChannel(e){const t=this._channels.indexOf(e);(0,i.assert)(-1!==t,"There is no that channel"),r.logNormal("Removing channel "+e),this._channels.splice(t,1),this._transport.setUrl(this._generateUrl())}getChannels(){return this._channels}hasChannel(e){return-1!==this._channels.indexOf(e)}connectionStatus(){return this._transport.connectionStatus()}connect(){(0,i.assert)(0!==this._channels.length,"There is no channels"),this._transport.connect()}disconnect(){this._transport.disconnect()}sendMessage(e){this._transport.sendMessage(e)}getLogs(e){return(0,o.getRawLogHistory)(e,"PushStream")}_onPushStreamMessage(e){if("string"!=typeof e)throw new Error("Wrong message type, expected string");const t=JSON.parse(e),n=t.id,i=t.channel;-2===n?r.logWarn("Received unexpected message: about removed the channel"):n>0&&(r.logDebug(`Received message: id="${n}" channel="${i}"`),this._messageHandler(t.text,n,i))}_generateUrl(){const e=this._channels.join("/");return`${this._settings.url}/${this._settings.urlPath}/${e}`}}},564894:(e,t,n)=>{"use strict";n.r(t),n.d(t,{registerService:()=>r,unregisterService:()=>a,hasService:()=>c,service:()=>l,waitServiceRegistered:()=>h});var i=n(579917);const s={},o=new Map;function r(e,t){if(c(e))throw new Error("Service already registered");s[e.id]=t;const n=o.get(e.id);void 0!==n&&(o.delete(e.id),n.resolve(t))}function a(e){if(!c(e))throw new Error("Service not found");s[e.id]=void 0}function c(e){return void 0!==s[e.id]}function l(e){const t=s[e.id];if(void 0===t)throw new Error("ServiceLocator: Service "+e.id+" not found");return t}function h(e){if(c(e))return Promise.resolve(l(e));let t=o.get(e.id);return void 0===t&&(t=(0,i.createDeferredPromise)(),o.set(e.id,t)),t.promise}},224743:(e,t,n)=>{"use strict";n.d(t,{globalCloseDelegate:()=>s,globalCloseMenu:()=>o});var i=n(97639);const s=new(n.n(i)());function o(){s.fire()}}}]);